<h2>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>
<form method="post" action="{{ url_for('admin_add_category') }}">
    <input name="name" placeholder="–ù–∞–∑–≤–∞" required>
    <input name="slug" placeholder="Slug (–ª–∞—Ç–∏–Ω–∏—Ü–µ—é, —É–Ω—ñ–∫–∞–ª—å–Ω–æ)" required>
    <select name="parent_slug">
        <option value="">(–ë–µ–∑ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó)</option>
        {% for cat in categories %}
            <option value="{{ cat[2] }}">{{ cat[1] }}</option>
        {% endfor %}
    </select>
    <input name="description" placeholder="–û–ø–∏—Å">
    <button type="submit">–î–æ–¥–∞—Ç–∏</button>
</form>
<ul>
    {% macro render_tree(tree) %}
        {% for cat in tree %}
            <li>
                <b>{{ cat.name }}</b> (slug: <code>{{ cat.slug }}</code>)
                <form method="post" action="{{ url_for('admin_delete_category', slug=cat.slug) }}" style="display:inline;">
                    <button type="submit" onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é?')">üóëÔ∏è</button>
                </form>
                <a href="{{ url_for('admin_edit_category', slug=cat.slug) }}">‚úèÔ∏è</a>
                {% if cat.children %}
                    <ul>{{ render_tree(cat.children) }}</ul>
                {% endif %}
            </li>
        {% endfor %}
    {% endmacro %}
    {{ render_tree(tree) }}
</ul>
<a href="{{ url_for('admin_home') }}">–ù–∞–∑–∞–¥</a>
